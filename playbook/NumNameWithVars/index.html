<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Number of name with variables - AnsibleMetrics</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Number of name with variables";
    var mkdocs_page_input_path = "playbook/NumNameWithVars.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> AnsibleMetrics</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <p class="caption"><span class="caption-text">Getting Started</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Quick Start</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Metrics</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="#">General</a>
    <ul>
                <li class="toctree-l2"><a class="reference internal" href="../../general/LinesBlank/">Lines blank</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../general/LinesCode/">Lines of code</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../general/LinesComment/">Lines of comment</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../general/NumConditions/">Number of conditions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../general/NumDecisions/">Number of decisions</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../general/NumDeprecatedKeywords/">Number of deprecated keywords</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../general/NumKeys/">Number of keys</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../general/NumMathOperations/">Number of math operations</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../general/NumSuspiciousComments/">Number of suspicious comments</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../general/NumTokens/">Number of tokens</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../../general/TextEntropy/">Text entropy</a>
                </li>
    </ul>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="#">Playbook</a>
    <ul class="current">
                <li class="toctree-l2"><a class="reference internal" href="../AvgPlaySize/">Average play size</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../AvgTaskSize/">Average task size</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumBlocks/">Number of blocks</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumBlocksErrorHandling/">Number of block error handling</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumCommands/">Number of commands</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumDeprecatedModules/">Number of deprecated modules</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumDistinctModules/">Number of distinct modules</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumExternalModules/">Number of external modules</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumFactModules/">Number of fact modules</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumFileExists/">Number of file extists</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumFileMode/">Number of file mode</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumFileModules/">Number of file modules</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumFilters/">Number of filters</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumIgnoreErrors/">Number of ignore_errors</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumImportPlaybook/">Number of import_playbook</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumImportRole/">Number of import_role</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumImportTasks/">Number of import_tasks</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumInclude/">Number of include</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumIncludeRole/">Number of include_role</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumIncludeTasks/">Number of include_tasks</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumIncludeVars/">Number of include_vars</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumLookups/">Number of lookups</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumLoops/">Number of loops</a>
                </li>
                <li class="toctree-l2 current"><a class="reference internal current" href="./">Number of name with variables</a>
    <ul class="current">
    <li class="toctree-l3"><a class="reference internal" href="#example">Example</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#parameters">Parameters</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#how-to-use">How to use</a>
    </li>
    </ul>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumParameters/">Number of parameters</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumPaths/">Number of paths</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumRegex/">Number of regex</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumPlays/">Number of plays</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumPrompts/">Number of prompts</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumRoles/">Number of roles</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumAuthorizedKey/">Number of SSH</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumTasks/">Number of tasks</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumUniqueNames/">Number of unique names</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumUri/">Number of urls</a>
                </li>
                <li class="toctree-l2"><a class="reference internal" href="../NumVars/">Number of variables</a>
                </li>
    </ul>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../about/">About</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">AnsibleMetrics</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Playbook &raquo;</li>
        
      
        
          <li>Metrics &raquo;</li>
        
      
    
    <li>Number of name with variables</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/radon-h2020/radon-ansible-metrics/edit/master/docs/playbook/NumNameWithVars.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="number-of-name-with-variables">Number of <code>name</code> with variables</h1>
<p>It measures the number of names that use variables.</p>
<p>With uniqueness as a goal, many playbook authors look to variables to satisfy this constraint. This strategy may work well but authors need to take care as to the source of the variable data they are referencing. Variable data can come from a variety of locations, and the values assigned to variables can be defined at a variety of times. For the sake of play and task names, it is important to remember that only variables for which the values can be determined at playbook parse time will parse and render correctly. If the data of a referenced variable is discovered via a task or other operation, the variable string will be displayed unparsed in the output.</p>
<hr />
<h2 id="example">Example</h2>
<p>The following example has <em>five names</em>, of which <strong>four using variables</strong>. </p>
<pre><code class="language-yaml">---
- name: play with a {{ var_name }}                  # 1st name with variable
  hosts: localhost
  vars:
    var_name: not-mastery

  tasks:
  - name: set a variable
    set_fact:
    task_var_name: &quot;defined variable&quot;

  - name: task with a {{ task_var_name }}           # 2nd name with variable
    debug:
    msg: &quot;I am mastery task&quot;

- name: second play with a {{ task_var_name }}      # 3rd name with variable
  hosts: localhost

  tasks:
  - name: task with a {{ runtime_var_name }}        # 4th name with variable
    debug:
      msg: &quot;I am another mastery task&quot;
</code></pre>
<hr />
<h2 id="parameters">Parameters</h2>
<table>
<thead>
<tr>
<th></th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Input</strong></td>
<td><code>io.StringIO</code></td>
<td>An ansible playbook</td>
</tr>
<tr>
<td><strong>Output</strong></td>
<td><code>unsigned int</code></td>
<td>The number of <code>name</code> with variables</td>
</tr>
<tr>
<td><strong>Exception</strong></td>
<td><code>TypeError</code></td>
<td>If the type of the input parameter is not io.StringIO</td>
</tr>
<tr>
<td></td>
<td><code>yaml.YAMLError</code></td>
<td>If the input file is not a valid yaml</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="how-to-use">How to use</h2>
<p>Below an example on how to call the metric and the expected output for the provided example:</p>
<pre><code class="language-python">from io import StringIO
from ansiblemetrics.playbook.num_name_with_variables import NumNameWithVariables

str = '- name: play with a {{ var_name }}\n\thosts: localhost\n\tvars:\n\t\tvar_name: not-mastery\n\t\n\ttasks:\n\t- name: set a variable\n\t\tset_fact:\n\t\ttask_var_name: &quot;defined variable&quot;\n\n\t- name: task with a {{ task_var_name }}\n\t\tdebug:\n\t\tmsg: &quot;I am mastery task&quot;\n\n- name: second play with a {{ task_var_name }}\n\thosts: localhost\n\n\ttasks:\n\t- name: task with a {{ runtime_var_name }}\n\t\tdebug:\n\t\t\tmsg: &quot;I am another mastery task&quot;' 
script = StringIO(str.expands(2)) # substitute \t with 2 spaces and create the StringIO object
count = NumNameWithVariables(script).count()
print('Number of name with variables: ', count)

&gt;&gt;&gt; Number of name with variables: 4
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../NumParameters/" class="btn btn-neutral float-right" title="Number of parameters">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../NumLoops/" class="btn btn-neutral" title="Number of loops"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/radon-h2020/radon-ansible-metrics/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../NumLoops/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../NumParameters/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
